{
  "version": 3,
  "sources": ["../src/Menu.js", "../src/Highscores.js", "../src/AnimationFrame.js", "../src/StateManager.js", "../src/Timer.js", "../src/Game.js", "../src/System.js", "../src/index.js"],
  "sourcesContent": ["// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\nimport { hideScorebox } from './Highscores';\n\nexport const MENU_HTML =\n\t\t'<div class=\"container\">' +\n\t\t'  <canvas id=\"mycanvas\" class=\"gamecvs\"></canvas>' +\n\t\t'  <a class=\"mybutton btnmenu\" onclick=\"LCDGame.displayInfobox();\">help</a>' +\n\t\t'  <a class=\"mybutton btnmenu\" onclick=\"LCDGame.displayScorebox();\">highscores</a>' +\n\t\t'  <div class=\"infobox\" id=\"infobox\">' +\n\t\t'    <div id=\"infocontent\">' +\n\t\t'      instructions' +\n\t\t'    </div>' +\n\t\t'    <a class=\"mybutton btnpop\" onclick=\"LCDGame.hideInfobox();\">Ok</a>' +\n\t\t'  </div>' +\n\t\t'</div>';\n\n\nexport function displayInfobox() {\n\thideScorebox();\n\tdocument.getElementById(\"infobox\").style.display = \"inherit\";\n\t//event.stopPropagation(); // stop propagation on button click event\n}\n\nexport function hideInfobox() {\n\t//var target = event.target || event.srcElement;\n\t// filter event handling when the event bubbles\n\t//if (event.currentTarget == target) {\n\tdocument.getElementById(\"infobox\").style.display = \"none\";\n\t//}\n}\n\n// -------------------------------------\n// menu overlay object\n// -------------------------------------\nconst Menu = function (lcdgame, name) {\n\t// save reference to game object\n\tthis.lcdgame = lcdgame;\n};\n\nexport default Menu;\n", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\nimport { hideInfobox } from './Menu';\nimport { LCDGAME_VERSION } from './System';\n\nexport const SCORE_HTML =\n\t\t'<div class=\"infobox\" id=\"scorebox\">' +\n\t\t'  <div id=\"scoreheader\">' +\n\t\t'  </div>' +\n\t\t'  <div id=\"scorecontent\">' +\n\t\t'    One moment...' +\n\t\t'  </div>' +\n\t\t'  <a class=\"mybutton btnnext\" id=\"btnprev\" data-direction=\"-1\">&lt;&lt;</a>' +\n\t\t'  <a class=\"mybutton btnnext\" id=\"btnnext\" data-direction=\"+1\">&gt;&gt;</a>' +\n\t\t'  <a class=\"mybutton btnpop\" onclick=\"LCDGame.hideScorebox();\">Ok</a>' +\n\t\t'</div>';\n\nvar HS_URL = \"http://bdrgames.nl/lcdgames/testphp/\";\n\nexport function displayScorebox() {\n\thideInfobox();\n\tdocument.getElementById(\"scorebox\").style.display = \"inherit\";\n\t//event.stopPropagation(); // stop propagation on button click event\n}\n\nexport function hideScorebox() {\n\t//var target = event.target || event.srcElement;\n\t// filter event handling when the event bubbles\n\t//if (event.currentTarget == target) {\n\tdocument.getElementById(\"scorebox\").style.display = \"none\";\n\t//}\n}\n\n// -------------------------------------\n// highscores object\n// -------------------------------------\nvar RANKS_PER_PAGE = 10;\n\nconst HighScores = function (lcdgame, gametitle, gametypes) {\n\t// save reference to game objects\n\tthis.lcdgame = lcdgame;\n\n\t// display variables\n\tthis.gametitle = gametitle;\n\tthis.gametypes = gametypes;\n\tthis.offset = 0;\n\n\t// highscore variables\n\tthis._scores_local = [];\n\tthis._scores_global = [];\n\tthis._scoretype = 0;\n};\n\nHighScores.prototype = {\n\n\tinit: function (tp) {\n\t\t// hook event to prev next buttons\n\t\tvar btnprev = document.getElementById(\"btnprev\");\n\t\tvar btnnext = document.getElementById(\"btnnext\");\n\t\tbtnprev.addEventListener(\"click\", this.onPrevNextButton.bind(this));\n\t\tbtnnext.addEventListener(\"click\", this.onPrevNextButton.bind(this));\n\n\t\t// init first highscores\n\t\tthis.buildHeaderHTML();\n\t\tthis.loadLocal(tp); // tp = game A or game B\n\t\tthis.loadGlobal();\n\t},\n\n\tgetGametype: function () {\n\t\tvar res = \"\";\n\t\tif (this.gametypes) {\n\t\t\tres = this.gametypes[this._scoretype-1];\n\t\t}\n\t\treturn res;\n\t},\n\n\tloadLocal: function (typ) {\n\n\t\t// clear variables\n\t\tthis._scores_local = [];\n\t\tthis._scoretype = typ; // typ = game type, for example 1 or 2)\n\t\tvar namecache = \"lcdgame_local_\"+this.gametitle+\"_hs\"+typ;\n\n\t\t// load from localstorage\n\t\tvar sc = window.localStorage.getItem(namecache);\n\n\t\t// error checking, localstorage might not exist yet at first time start up\n\t\ttry {\n\t\t\tthis._scores_local = JSON.parse(sc);\n\t\t} catch (e) {\n\t\t\tthis._scores_local = []; //error in the above string(in this case,yes)!\n\t\t}\n\t\t// error checking just to be sure, if localstorage contains something else then a JSON array (hackers?)\n\t\tif (Object.prototype.toString.call(this._scores_local) !== \"[object Array]\") {\n\t\t\tthis._scores_local = [];\n\t\t}\n\t},\n\n\tindexLocal: function (sc, typ) {\n\t\t// refresh local highscores if needed\n\t\tif (typ != this._scoretype) {\n\t\t\tthis.loadLocal(typ);\n\t\t}\n\n\t\t// assume at end\n\t\tvar idx = -1;\n\n\t\t// check from bottom to top of list\n\t\tfor (var i = this._scores_local.length-1; i >= 0; i--) {\n\t\t\t// where to insert new highscore\n\t\t\tif (sc > this._scores_local[i].score) {\n\t\t\t\tidx = i;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn idx;\n\t},\n\n\tsaveLocal: function (plr, sc, lvl, typ) {\n\t\t// always store local highscore\n\t\tvar rec = {\"player\":plr, \"score\":sc, \"level\":lvl};\n\n\t\t// which place in local highscores\n\t\tvar idx = this.indexLocal(sc, typ);\n\t\tif (idx < 0) {\n\t\t\t// at end\n\t\t\tthis._scores_local.push(rec);\n\t\t} else {\n\t\t\t// some where in the middle\n\t\t\tthis._scores_local.splice(idx, 0, rec);\n\t\t}\n\n\t\t// save highscores locally\n\t\tvar namecache = \"lcdgame_local_\"+this.gametitle+\"_hs\"+typ;\n\t\twindow.localStorage.setItem(namecache, JSON.stringify(this._scores_local));\n\n\t\t// also save default entry name\n\t\twindow.localStorage.setItem(\"lcdgame_highscore_name\", plr);\n\t},\n\n\tsaveGlobal: function (plr, sc, lvl, typ, sec, but) {\n\t\tconst { platform } = window;\n\t\tlet info;\n\t\t// additional client info\n\t\tif (platform) {\n\t\t\t// use platform.js for more accurate info\n\t\t\tinfo =\n\t\t\t\t\t(platform.product ? \"&device=\"  + platform.product : \"\") +\n\t\t\t\t\t(platform.os      ? \"&os=\"      + platform.os      : \"\") +\n\t\t\t\t\t(platform.name    ? \"&browser=\" + platform.name    : \"\");\n\t\t} else {\n\t\t\tvar guess = this.guessOsBrowser();\n\t\t\tinfo =\n\t\t\t\t\t\"&device=\" + guess.device +\n\t\t\t\t\t\"&os=\" + guess.os +\n\t\t\t\t\t\"&browser=\" + guess.browser;\n\t\t}\n\t\tvar language = navigator.language;\n\t\tvar clientguid  = this.getClientGUID();\n\n\t\t// set gametype for higscores\n\t\tthis._scoretype = typ;\n\n\t\t// reserved characters in url\n\t\t//var gametitle = gametitle.replace(/\\&/g, \"%26\"); // & -> %26\n\t\tplr = plr.replace(/&/g, \"%26\"); // & -> %26\n\n\t\t// build url\n\t\tvar url = HS_URL + \"newhs.php\";\n\t\tvar paramsdata =\n\t\t\t\t\"gamename=\" + this.gametitle +  // highscore data\n\t\t\t\t\"&gametype=\" + typ +\n\t\t\t\t\"&player=\" + plr +\n\t\t\t\t\"&score=\" + sc +\n\t\t\t\t\"&level=\" + lvl +\n\t\t\t\t\"&playtime=\" + sec +\n\t\t\t\t\"&buttonpress=\" + but +\n\t\t\t\tinfo + // client info\n\t\t\t\t\"&language=\" + language +\n\t\t\t\t\"&lcdversion=\" + LCDGAME_VERSION +\n\t\t\t\t\"&clientguid=\" + clientguid;\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.open('POST', url, true);\n\t\trequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n\t\t//request.setRequestHeader(\"Content-length\", paramsdata.length);\n\t\t//request.setRequestHeader(\"Connection\", \"close\");\n\n\t\t// handle success or error\n\t\trequest.onreadystatechange = function(receiveddata) {\n\t\t\tif (request.status >= 200 && request.status < 400) {\n\t\t\t\tif (request.readyState == 4 && request.status == 200) {\n\t\t\t\t\t// Success!\n\t\t\t\t\t// here you could go to the leaderboard or restart your game\n\t\t\t\t\tconsole.log('SUCCESS!!\\nrequest.status='+ request.status + '\\nrequest.response=' + request.response);\n\t\t\t\t\tvar getjson = JSON.parse(request.response);\n\t\t\t\t\tif (getjson.result == 'OK') {\n\t\t\t\t\t\tconsole.log('Highscore sent succesfully');\n\t\t\t\t\t\t// result contains rank, set offset to corresponding page\n\t\t\t\t\t\t// for example getjson.rank=23 -> offset=20\n\t\t\t\t\t\tvar rank = (getjson.rank ? (!isNaN(getjson.rank) ? getjson.rank : 1) : 1);\n\t\t\t\t\t\tthis.offset = RANKS_PER_PAGE * Math.floor((rank-1) / RANKS_PER_PAGE);\n\t\t\t\t\t\t// load highscores\n\t\t\t\t\t\tthis.loadGlobal();\n\t\t\t\t\t\tdisplayScorebox();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('Highscore sent failed');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We reached our target server, but it returned an error\n\t\t\t\tconsole.log('Highscore sent failed with error ' + request.status + ': ' + request.statusText);\n\t\t\t}\n\t\t}.bind(this); // <- only change\n\n\t\t//paramsdata = getUserAgentParams();\n\t\trequest.send(paramsdata);\n\t},\n\n\tgetHighscore: function (typ) {\n\t\tvar sc = 0;\n\t\tif (this.lcdgame.highscores._scores_global[0]) {\n\t\t\tsc = this.lcdgame.highscores._scores_global[0].score;\n\t\t}\n\t\treturn sc;\n\t},\n\n\tcheckScore: function () {\n\t\t// end of game  time\n\t\tvar timeend = new Date();\n\t\t// save current score values, because will reset on background when new game starts\n\t\tvar sc = this.lcdgame.score;\n\t\tvar lvl = this.lcdgame.level;\n\t\tvar typ = this.lcdgame.gametype;\n\t\tvar sec = Math.floor((timeend - this.lcdgame.playtimestart) / 1000); // round to seconds\n\t\tvar but = this.lcdgame.buttonpress;\n\n\t\tif (sc > 0) {\n\t\t\t// input name\n\t\t\tvar lastname = (window.localStorage.getItem(\"lcdgame_highscore_name\") || \"\");\n\t\t\tvar plr = prompt(\"New highscore, enter your name and press enter to submit or press cancel.\", lastname);\n\n\t\t\t// not null (cancel) or empty string\n\t\t\tif (plr != null) {\n\t\t\t\tplr = plr.trim();\n\t\t\t\tif (plr != \"\") {\n\t\t\t\t\tthis.saveLocal(plr, sc, lvl, typ);\n\t\t\t\t\tthis.saveGlobal(plr, sc, lvl, typ, sec, but);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tloadGlobal: function () {\n\t\tvar url = HS_URL + \"geths.php\" +\n\t\t\t\"?gamename=\" + this.gametitle +  // highscore data\n\t\t\t\"&gametype=\" + this._scoretype +\n\t\t\t\"&offset=\" + this.offset; // 0=first page, 10=second page etc\n\n\t\tvar xmlHttp = new XMLHttpRequest();\n\t\txmlHttp.open(\"GET\", url, true); // true for asynchronous\n\t\txmlHttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n\t\txmlHttp.onreadystatechange = function() {\n\t\t\tif (xmlHttp.readyState == 4 && xmlHttp.status == 200)\n\t\t\t\tthis.afterLoadGlobal(xmlHttp.responseText);\n\t\t}.bind(this); // <- only change\n\t\txmlHttp.send(null);\n\t},\n\n\tafterLoadGlobal: function (data) {\n\t\t// error checking, localstorage might not exist yet at first time start up\n\t\ttry {\n\t\t\tthis._scores_global = JSON.parse(data);\n\t\t} catch (e) {\n\t\t\tthis._scores_global = []; //error in the above string(in this case,yes)!\n\t\t}\n\t\t// error checking just to be sure, if data contains something else then a JSON array (hackers?)\n\t\tif (Object.prototype.toString.call(this._scores_global) !== \"[object Array]\") {\n\t\t\tthis._scores_global = [];\n\t\t}\n\n\t\t// flag if also local scores\n\t\tfor (var g=0; g < this._scores_global.length; g++) {\n\t\t\t// add property \"local\"\n\t\t\tthis._scores_global[g].local = false;\n\t\t\t// check if corresponding score in local scores\n\t\t\tfor (var l=0; l < this._scores_local.length; l++) {\n\t\t\t\t// same name and same score, probably the same -> display as red font\n\t\t\t\tif (   (this._scores_global[g].player == this._scores_local[l].player)\n\t\t\t\t\t&& (this._scores_global[g].score == this._scores_local[l].score) ) {\n\t\t\t\t\tthis._scores_global[g].local = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.refreshHTML();\n\t},\n\n\tonFilterButton: function (dv) {\n\n\t\tif (dv.currentTarget.dataset) {\n\t\t\tvar typ = parseInt(dv.currentTarget.dataset.gametype);\n\n\t\t\tif (this.gametype != typ) {\n\t\t\t\tthis.offset = 0;\n\t\t\t\tthis.loadLocal(typ);\n\t\t\t\tthis.loadGlobal();\n\t\t\t}\n\t\t}\n\t},\n\n\tonPrevNextButton: function (dv) {\n\t\tif (dv.currentTarget.dataset) {\n\t\t\t// calculate new offset value\n\t\t\tvar dir = parseInt(dv.currentTarget.dataset.direction);\n\t\t\tvar ofs = this.offset + (dir > 0 ? RANKS_PER_PAGE : -1 * RANKS_PER_PAGE);\n\n\t\t\t// prev on first page\n\t\t\tif (ofs < 0) ofs = 0;\n\n\t\t\t// next button, but already on last page\n\t\t\tif ( (dir > 0) && (this._scores_global.length < RANKS_PER_PAGE) ) ofs = this.offset;\n\n\t\t\t// only refresh when offset changed\n\t\t\tif (this.offset != ofs) {\n\t\t\t\tthis.offset = ofs;\n\t\t\t\tthis.loadGlobal();\n\t\t\t}\n\t\t}\n\t},\n\n\tbuildHeaderHTML: function () {\n\n\t\t// game name and column headers\n\t\tvar str = '<h1 id=\"scoretitle\">' + this.gametitle + '</h1>';\n\n\t\tfor (let i = this.gametypes.length-1; i >= 0; i--) {\n\t\t\tstr = str + '<a class=\"filter\" data-gametype=\"' + (i + 1) + '\" id=\"filtertype' + i + '\">' + this.gametypes[i] + '</a>';\n\t\t}\n\n\t\t// refresh score filter buttons\n\t\tdocument.getElementById(\"scoreheader\").innerHTML = str;\n\n\t\t// attach click events to all buttons\n\t\tfor (let i = 0; i < this.gametypes.length; i++) {\n\t\t\tvar btn = document.getElementById(\"filtertype\"+i);\n\t\t\tbtn.addEventListener(\"click\", this.onFilterButton.bind(this));\n\t\t}\n\t},\n\n\trefreshHTML: function () {\n\t\t// build highscore rows\n\t\tvar rows = \"\";\n\t\tfor (var i = 0; i < RANKS_PER_PAGE; i++) {\n\t\t\tvar rec = this._scores_global[i];\n\n\t\t\t// get record\n\t\t\tif (typeof rec === \"undefined\") {\n\t\t\t\tvar rk = this.offset + (i+1);\n\t\t\t\trec = {\"rank\":rk, \"player\":\".....\", \"score\":0, \"level\":1, \"local\":false};\n\t\t\t}\n\n\t\t\t// mark local scores in red\n\t\t\tvar highlight = (rec.local ? \" style=\\\"color:#f00\\\"\" : \"\");\n\n\t\t\t// build html\n\t\t\trows = rows + \"      <tr\"+highlight+\"><td>\" + rec.rank + \".</td><td>\" + rec.player + \"</td><td>\" + rec.score + \"</td></tr>\";\n\t\t}\n\n\t\t// game name and column headers\n\t\tvar str =\n\t\t\t\"<table>\" +\n\t\t\t\"      <tr><td>Rk.</td><td>Name</td><td>Score</td></tr>\" +\n\t\t\trows +\n\t\t\t\"    </table>\";\n\n\t\t// refresh html content\n\t\tthis.lcdgame.scorecontent.innerHTML = str;\n\n\t\t// refresh header html\n\t\tstr = this.gametitle + ' (' + this.getGametype() + ')';\n\t\tdocument.getElementById(\"scoretitle\").innerHTML = str;\n\t},\n\n\n\t//uuidv4: function () {\n\t//\tvar patchcrypto = window.crypto || window.msCrypto; // IE11 -> msCrypto\n\t//\treturn ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, function(c) {\n\t//\t\treturn (c ^ patchcrypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n\t//\t\t}\n\t//\t)\n\t//},\n\n\tuuidv4: function () {\n\t\t// simpler uuid generator, better browser compatibility (found at https://gist.github.com/jcxplorer/)\n\t\tvar uuid = \"\";\n\t\tvar random;\n\t\tfor (var i = 0; i < 32; i++) {\n\t\t\trandom = Math.random() * 16 | 0;\n\n\t\t\tif (i == 8 || i == 12 || i == 16 || i == 20) {\n\t\t\t\tuuid += \"-\";\n\t\t\t}\n\t\t\tuuid += (i == 12 ? 4 : (i == 16 ? (random & 3 | 8) : random)).toString(16);\n\t\t}\n\t\treturn uuid;\n\t},\n\n\tgetClientGUID: function () {\n\t\tvar guid = window.localStorage.getItem(\"lcdgame_client_guid\");\n\t\tif (!guid) {\n\t\t\t// create one\n\t\t\tguid = this.uuidv4();\n\t\t\twindow.localStorage.setItem(\"lcdgame_client_guid\", guid);\n\t\t}\n\t\treturn guid;\n\t},\n\n\tguessOsBrowser: function () {\n\t\t// Also send OS and browser with highscores, for library optimizing\n\t\t// Educated guess; far from accurate\n\t\t// Determining the device/os/browser goes way beyond the scope of this LCDgame library\n\t\t// For more accurately determining os/browser use library platform.js or similar library\n\n\t\t// initialise\n\t\tvar device = \"\";\n\t\tvar os = \"\";\n\t\tvar browser = \"\";\n\n\t\t// note: navigator.userAgent is a mess\n\t\tvar ua = navigator.userAgent || navigator.vendor || window.opera;\n\n\t\t// -------------------------------------\n\t\t//       device guesses\n\t\t// -------------------------------------\n\t\t// BlackBerry\n\t\tif (/BlackBerry|BB10|PlayBook|Passport/i.test(ua)) {\n\t\t\tdevice = \"BlackBerry\";\n\t\t} else\n\t\t// samsung mobiles\n\t\tif (/GT-I9\\d{3}|SM-G9\\d{2}/.test(ua)) {device = \"Galaxy S-series\";}\n\t\telse if (/SM-A\\d{3}/.test(ua)) {device = \"Galaxy A-series\";}\n\t\telse if (/SM-J\\d{3}/.test(ua)) {device = \"Galaxy J-series\";}\n\t\telse if (/SM-T\\d{3}/.test(ua)) {device = \"Galaxy Tab\";}\n\t\telse if (/SM-N\\d{3}/.test(ua)) {device = \"Galaxy Note\";}\n\t\telse if (/SAMSUNG/.test(ua)) {device = \"Samsung\";}\n\t\t// huawei\n\t\telse if (/huawei/i.test(ua)) {device = \"Huawei\";}\n\t\t// kindle\n\t\telse if (/kindle/.test(ua)) {device = \"Kindle\";}\n\t\t// Xbox One\n\t\telse if (/xbox one/i.test(ua)) {device = \"Xbox One\";}\n\t\t// Xbox 360\n\t\telse if (/xbox/i.test(ua)) {device = \"Xbox 360\";}\n\t\t// Playstation Vita, Playstation 3, Playstation 4\n\t\telse if (/playstation /i.test(ua)) {\n\t\t\tdevice = (/playstation [^;) ]*/i.exec(ua) || \"Playstation\");\n\t\t}\n\t\t// Wii U\n\t\telse if (/nintendo wii/i.test(ua)) {device = \"Wii U\";}\n\t\t// windows phone\n\t\telse if (/IEMobile|Windows Phone/i.test(ua)) {\n\t\t\tdevice = \"Windows Phone\";\n\t\t} else\n\t\t// iOS detection from: http://stackoverflow.com/a/9039885/177710\n\t\tif (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {\n\t\t\tif (/iPad/.test(ua))      { device = \"iPad\";}\n\t\t\telse if (/iPod/.test(ua)) { device = \"iPod\";}\n\t\t\telse                      ( device = \"iPhone\" );\n\t\t} else\n\t\t// Mac OS desktop\n\t\tif (/mac os|macintosh/i.test(ua)) {\n\t\t\tdevice = \"Macintosh\";\n\t\t}\n\n\t\t// -------------------------------------\n\t\t//       OS guesses\n\t\t// -------------------------------------\n\t\t// Windows Phone must come first because its UA also contains \"Android\"\n\t\tif (/tizen /i.test(ua)) {\n\t\t\tos = (/tizen [^;)]*/i.exec(ua)[0] || \"Tizen\");\n\t\t} else\n\t\t// Windows Phone must come first because its UA also contains \"Android\"\n\t\tif (/windows phone/i.test(ua)) {\n\t\t\tos = \"Windows Phone\";\n\t\t} else\n\t\tif (/android /i.test(ua)) {\n\t\t\tos = (/android [^;)]*/i.exec(ua)[0] || \"Android\");\n\t\t} else\n\t\t// iOS detection from: http://stackoverflow.com/a/9039885/177710\n\t\tif (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {\n\t\t\tconst osvar = /(iphone os |cpu os )[^;) ]*/i.exec(ua);\n\t\t\tos = (osvar[0] || \"\");\n\t\t\tos = os.replace(/cpu|iphone|os/ig, \"\").trim();\n\t\t\tos = \"iOS \" + os.replace(/_/g, \".\");\n\t\t} else\n\t\tif (/mac os/i.test(ua)) {\n\t\t\tos = \"Mac OS\";\n\t\t} else\n\t\tif ( (/windows /i.test(ua)) ) {\n\t\t\tconst osvar = /windows [^;)]*/i.exec(ua)[0];\n\t\t\tos = (osvar || \"Windows\");\n\n\t\t\tif (/10/.test(osvar))      os = \"Windows 10\";\n\t\t\tif (/6.3/.test(osvar))     os = \"Windows 8.1\";\n\t\t\tif (/6.2/.test(osvar))     os = \"Windows 8\";\n\t\t\tif (/6.1/.test(osvar))     os = \"Windows 7\";\n\t\t\tif (/6.0/.test(osvar))     os = \"Windows Vista\";\n\t\t\tif (/5.1|5.2/.test(osvar)) os = \"Windows XP\";\n\t\t\tif (/5.0/.test(osvar))     os = \"Windows 2000\";\n\t\t} else\n\t\t// any other\n\t\t{os = navigator.platform;}\n\n\t\t// -------------------------------------\n\t\t//       Browser guesses\n\t\t// -------------------------------------\n\t\t// Opera 8.0+\n\t\tif ((!!window.opr && !!window.opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n\t\t\tbrowser = \"Opera 8.0+\";\n\t\t} else\n\t\t// Firefox 1.0+\n\t\tif (typeof InstallTrigger !== 'undefined') {\n\t\t\tbrowser = \"Firefox 1.0+\";\n\t\t} else\n\t\t// Edge 20+\n\t\tif (/edge/i.test(ua)) {\n\t\t\tbrowser = \"Edge\";\n\t\t} else\n\t\t// Chrome 1+\n\t\tif ( (/chrome/i.test(ua)) && (/google/i.test(navigator.vendor)) ) {\n\t\t\tbrowser = \"Chrome\";\n\t\t} else\n\t\t// Safari 3.0+ \"[object HTMLElementConstructor]\"\n\t\tif ( (/safari/i.test(ua)) && (/apple computer/i.test(navigator.vendor)) ) {\n\t\t\tbrowser = \"Safari\";\n\t\t} else\n\t\t// Internet Explorer mobile\n\t\tif (/iemobile/i.test(ua)) {\n\t\t\tbrowser = (/iemobile[^;) ]*/i.exec(ua)[0] || \"IEMobile\");\n\t\t} else\n\t\t// Internet Explorer\n\t\tif (/MSIE /.test(ua)) {\n\t\t\tbrowser = (/MSIE [^;) ]*/.exec(ua)[0] || \"MSIE\");\n\t\t} else\n\t\t// Internet Explorer 11\n\t\tif (/rv:11\\./.test(ua)) {\n\t\t\tbrowser = \"MSIE 11\";\n\t\t} else\n\t\t// Internet Explorer 6-11\n\t\tif ( /*@cc_on!@*/false || !!document.documentMode) {\n\t\t\tbrowser = \"MSIE 6-11\";\n\t\t}\n\n\t\t// replace problematic characters\n\t\tdevice  =  device.replace(/&|\\?|\\//g, \" \").trim();\n\t\tos      =      os.replace(/&|\\?|\\//g, \" \").trim();\n\t\tbrowser = browser.replace(/&|\\?|\\//g, \" \").trim();\n\n\t\t// return result\n\t\treturn {\"device\": device, \"os\": os, \"browser\": browser};\n\t}\n};\n\n//LCDGame.HighScores.prototype.constructor = LCDGame.HighScores;\nexport default HighScores;", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\n// -------------------------------------\n// request animation frame\n// -------------------------------------\nconst AnimationFrame = function (lcdgame) {\n\t// save reference to game object\n\tthis.lcdgame = lcdgame;\n\tthis.raftime = null;\n};\n\nAnimationFrame.prototype = {\n\n\tstart: function () {\n\t\tvar vendors = [\n\t\t\t'ms',\n\t\t\t'moz',\n\t\t\t'webkit',\n\t\t\t'o'\n\t\t];\n\n\t\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; x++)\n\t\t{\n\t\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'];\n\t\t}\n\n\t\tvar _this = this;\n\n\t\t// cannot use requestAnimationFrame for whatever reason, fall back on `setTimeout`\n\t\tif (!window.requestAnimationFrame)\n\t\t{\n\t\t\tthis.animationLoop = function () {\n\t\t\t\treturn _this.updateSetTimeout();\n\t\t\t};\n\n\t\t\twindow.setTimeout(this.animationLoop, 0);\n\t\t}\n\t\telse\n\t\t{\n\n\t\t\tthis.animationLoop = function (time) {\n\t\t\t\treturn _this.updateAnimFrame(time);\n\t\t\t};\n\n\t\t\twindow.requestAnimationFrame(this.animationLoop);\n\t\t}\n\t},\n\n\tupdateAnimFrame: function (rafTime) {\n\t\t// check if switch to pending new state\n\t\tthis.lcdgame.state.checkSwitch();\n\n\t\t// floor the rafTime to make it equivalent to the Date.now() provided by updateSetTimeout (just below)\n\t\tthis.raftime = Math.floor(rafTime);\n\t\tthis.lcdgame.updateloop(this.raftime);\n\n\t\twindow.requestAnimationFrame(this.animationLoop);\n\t},\n\n\tupdateSetTimeout: function () {\n\t\t// check if switch to pending new state\n\t\tthis.lcdgame.state.checkSwitch();\n\n\t\tthis.raftime = Date.now();\n\t\tthis.lcdgame.updateloop(this.raftime);\n\n\t\tvar ms = Math.floor(1000.0 / 60.0);\n\t\twindow.setTimeout(this.animationLoop, ms);\n\t}\n};\n\nexport default AnimationFrame;", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\n// -------------------------------------\n// the state manager\n// -------------------------------------\nconst StateManager = function (lcdgame) {\n\tthis.lcdgame = lcdgame;\n\tthis._currentState = \"\";\n\tthis._pendingState = \"\";\n\tthis.states = {}; // hold all states\n};\n\nStateManager.prototype = {\n\n\tadd: function (key, state) {\n\t\t//state.game = this.game;\n\t\tthis.states[key] = new state(this.lcdgame);\n\n\t\tthis._pendingState = key;\n\n\t\treturn state;\n\t},\n\n\tstart: function (key) {\n\n\t\tthis.lcdgame.cleartimers();\n\n\t\tif (this._currentState) {\n\t\t\tthis.states[this._currentState].destroy;\n\t\t\tthis._currentState = \"\";\n\t\t}\n\t\tthis._pendingState = key;\n\t\t//this._currentState = key;\n\t\t//this.states[this._currentState].init();\n\t},\n\n\tcurrentState: function () {\n\n\t\tif (this._currentState) {\n\t\t\treturn this.states[this._currentState];\n\t\t}\n\t},\n\n\tcheckSwitch: function () {\n\t\t// switch to next state\n\t\tif (this._currentState != this._pendingState) {\n\t\t\tthis._currentState = this._pendingState;\n\t\t\tthis.states[this._currentState].init();\n\t\t}\n\t}\n\n};\n\nexport default StateManager;\n", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\n// -------------------------------------\n// pulse timer object\n// -------------------------------------\nconst Timer = function (context, callback, interval, waitfirst) {\n\t// context of callback\n\tthis.context = context;\n\n\t// Event: Timer tick\n\tthis.callback = callback;\n\n\t// frequency of the timer in milliseconds\n\tthis.interval = interval || 1000;\n\n\t// call callback instantly, or wait one pulse until calling callback\n\tthis.waitfirst = waitfirst;\n\n\t// counter, useful for directing animations etc.\n\tthis.counter = 0;\n\n\t// maximum counter, useful for directing animations etc.\n\tthis.max = null;\n\n\t// Property: Whether the timer is enable or not\n\tthis.enabled = false;\n\n\t// Member variable: Hold interval id of the timer\n\tthis.timerId = 0;\n\tthis.lasttime = 0;\n};\n\nTimer.prototype = {\n\n\t// update each frame\n\tupdate: function(timestamp) {\n\n\t\t//debugger;\n\t\tvar varname = this.callback.name;\n\t\t//for (var key in this.context) {\n\t\t//\tif (this.context.hasOwnProperty(key)) {\n\t\t//\t\tif (key.indexOf(\"timer\") >= 0) {\n\t\t//\t\t\tvarname = key;\n\t\t//\t\t\tbreak;\n\t\t//\t\t};\n\t\t//\t};\n\t\t//};\n\n\t\tvar delta = timestamp - this.lasttime;\n\n\t\t// timer tick\n\t\tif (delta >= this.interval) {\n\t\t\t//console.log(\"LCDGame.Timer<\"+varname+\">.update() -> delta=\"+delta+\" this.interval=\"+this.interval+\" this.lasttime=\"+this.lasttime+\" this.waitfirst=\"+this.waitfirst);\n\t\t\t//this.lasttime = timestamp;\n\t\t\tthis.lasttime = this.lasttime + this.interval;\n\t\t\t// game callbacks\n\t\t\tthis.doTimerEvent();\n\t\t}\n\t},\n\n\t// local timer event of Timer-object\n\tdoTimerEvent: function() {\n\t\t// keep track how many times event has fired\n\t\tthis.counter++;\n\n\t\t// do callback function to gameobj, so not to LCDGame.Timer object\n\t\tthis.callback.call(this.context, this);\n\n\t\t// if maximum of callbacks was set\n\t\tif (typeof this.max !== \"undefined\") {\n\t\t\tif (this.counter >= this.max) this.enabled = false;\n\t\t}\n\t},\n\n\t// start/enable the timer\n\tstart: function(max, waitfirst) {\n\t\t// change waitfirst only when passed as parameter\n\t\tif (typeof waitfirst !== \"undefined\") this.waitfirst = waitfirst;\n\t\t// initialise variables\n\t\tthis.enabled = true;\n\t\tthis.counter = 0;\n\t\tthis.max = max;\n\t\t//this.lasttime = 0;\n\t\tthis.lasttime = (this.context.lcdgame.raf.raftime || 0);\n\t\t// start immediately?\n\t\tif (this.waitfirst == false) this.lasttime -= this.interval;\n\t},\n\n\t// pause the timer\n\tpause: function() {\n\t\t// initialise variables\n\t\tthis.enabled = false;\n\t},\n\n\t// unpause the timer; continue but do not reset the counter\n\tunpause: function() {\n\t\tthis.lasttime = (this.context.lcdgame.raf.raftime || 0);\n\t\tif (this.waitfirst == false) this.lasttime -= this.interval;\n\t\tthis.enabled = true;\n\t}\n};\n\nexport default Timer;", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\nimport { LCDGAME_VERSION } from './System';\nimport { MENU_HTML, displayInfobox } from './Menu';\nimport HighScores, { SCORE_HTML } from './Highscores';\nimport AnimationFrame from './AnimationFrame';\nimport StateManager from './StateManager';\nimport Timer from './Timer';\n\n// -------------------------------------\n// game object\n// -------------------------------------\nconst Game = function (configfile, metadatafile) {\n\n\tthis.gamedata = [];\n\tthis.imageBackground = null;\n\tthis.imageShapes = null;\n\tthis.score = 0;\n\tthis.gametype = 0;\n\tthis.level = 0;\n\n\tthis.buttonpress = 0;\n\tthis.playtimestart = null;\n\n\tthis.soundmute = false;\n\n\t// site lock, enable for no hotlinking\n\t/*\n\tvar domain = document.domain;\n\tsiteLock = false;\n\tvar siteLock = (domain.indexOf(\"bdrgames.nl\") == -1);\n\tif (siteLock) {\n\t\tdocument.write('To play LCD game simulations, please visit: <a href=\"http://www.bdrgames.nl/lcdgames/\">http://www.bdrgames.nl/lcdgames/</a>');\n\t\tconsole.log('%c To play LCD game simulations, please visit: http://www.bdrgames.nl/lcdgames/', 'background: #000; color: #0f0'); // cool hax0r colors ;)\n\t\treturn;\n\t};\n*/\n\n\t// initialise object\n\tthis.countimages = 0;\n\tthis.scaleFactor = 1.0;\n\n\tthis.imageBackground = new Image();\n\tthis.imageShapes = new Image();\n\n\t// events after loading image\n\tif (this.imageBackground.addEventListener) {\n\t\t// chrome, firefox\n\t\tthis.imageBackground.addEventListener(\"load\", this.onImageLoaded.bind(this));\n\t\tthis.imageBackground.addEventListener(\"error\", this.onImageError.bind(this));\n\t\tthis.imageShapes.addEventListener(\"load\", this.onImageLoaded.bind(this));\n\t\tthis.imageShapes.addEventListener(\"error\", this.onImageError.bind(this));\n\t}\n\telse {\n\t\t// IE8\n\t\tthis.imageBackground.attachEvent(\"load\", this.onImageLoaded.bind(this));\n\t\tthis.imageBackground.attachEvent(\"error\", this.onImageError.bind(this));\n\t\tthis.imageShapes.attachEvent(\"load\", this.onImageLoaded.bind(this));\n\t\tthis.imageShapes.attachEvent(\"error\", this.onImageError.bind(this));\n\t}\n\n\t// create canvas element and add to document\n\tvar str =\n\t\tMENU_HTML +\n\t\tSCORE_HTML;\n\n\tdocument.write(str);\n\n\tthis.canvas = document.getElementById(\"mycanvas\");\n\tthis.infobox = document.getElementById(\"infobox\");\n\tthis.scorebox = document.getElementById(\"scorebox\");\n\tthis.infocontent = document.getElementById(\"infocontent\");\n\tthis.scorecontent = document.getElementById(\"scorecontent\");\n\n\t// get context of canvas element\n\tthis.context2d = this.canvas.getContext(\"2d\");\n\n\t// state manager\n\tthis.state = new StateManager(this);\n\n\t// request animation frame\n\tthis.raf = new AnimationFrame(this);\n\n\tthis.timers = [];\n\n\t// add gamedata and populate by loading json\n\tthis.loadConfig(configfile);\n\tmetadatafile = (metadatafile || \"metadata/gameinfo.json\");\n\tthis.loadMetadata(metadatafile);\n\n\t// mouse or touch input\n\tthis._touchdevice = false;\n\t//this._mousedevice = false\n\n\treturn this;\n};\n\nGame.prototype = {\n\t// -------------------------------------\n\t// background ans shapes images loaded\n\t// -------------------------------------\n\tonImageLoaded: function() {\n\t\t// max two images\n\t\tthis.countimages++;\n\t\t// check if both background and shapes images were loaded\n\t\tif (this.countimages >= 2) {\n\t\t\tthis.initGame();\n\t\t}\n\t},\n\n\tonImageError: function() {\n\t\t// handle error\n\t\tconsole.log(\"** ERROR ** lcdgame.js - onImageError.\");\n\t},\n\n\t// -------------------------------------\n\t// load a game configuration file\n\t// -------------------------------------\n\tloadConfig: function(path) {\n\n\t\tvar xhrCallback = function()\n\t\t{\n\t\t\tif (xhr.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tif ((xhr.status === 200) || (xhr.status === 0)) {\n\t\t\t\t\tthis.onConfigLoad(JSON.parse(xhr.responseText));\n\t\t\t\t} else {\n\t\t\t\t\tthis.onConfigError(xhr);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.onreadystatechange = xhrCallback.bind(this);\n\n\t\txhr.open(\"GET\", path, true);\n\t\txhr.send();\n\t},\n\n\t// -------------------------------------\n\t// start game\n\t// -------------------------------------\n\tonConfigLoad: function(data) {\n\t\t// load all from JSON data\n\t\tthis.gamedata = data;\n\n\t\t// set images locations will trigger event onImageLoaded\n\t\tthis.imageBackground.src = data.imgback;\n\t\tthis.imageShapes.src = data.imgshapes;\n\n\t\t// add custom lcdgame.js properties for use throughout the library\n\t\tfor (var i = 0; i < this.gamedata.frames.length; i++) {\n\n\t\t\t// add current/previous values to all shape objects\n\t\t\tthis.gamedata.frames[i].value = false;\n\t\t\tthis.gamedata.frames[i].valprev = false;\n\n\t\t\t// add type\n\t\t\tthis.gamedata.frames[i].type = \"shape\";\n\t\t}\n\n\t\t// prepare sequences\n\t\tfor (var s = 0; s < this.gamedata.sequences.length; s++) {\n\t\t\t// shape indexes\n\t\t\tthis.gamedata.sequences[s].ids = [];\n\n\t\t\t// find all frames indexes\n\t\t\tfor (var f = 0; f < this.gamedata.sequences[s].frames.length; f++) {\n\t\t\t\tvar filename = this.gamedata.sequences[s].frames[f];\n\t\t\t\tvar idx = this.shapeIndexByName(filename);\n\t\t\t\tthis.gamedata.sequences[s].ids.push(idx);\n\t\t\t}\n\t\t}\n\n\t\t// prepare digits\n\t\tfor (var d = 0; d < this.gamedata.digits.length; d++) {\n\t\t\t// shape indexes\n\t\t\tthis.gamedata.digits[d].ids = [];\n\t\t\tthis.gamedata.digits[d].locids = [];\n\n\t\t\t// find all digit frames indexes\n\t\t\tfor (let f = 0; f < this.gamedata.digits[d].frames.length; f++) {\n\t\t\t\tconst filename = this.gamedata.digits[d].frames[f];\n\t\t\t\tconst idx = this.shapeIndexByName(filename);\n\t\t\t\tthis.gamedata.digits[d].ids.push(idx);\n\t\t\t\t// set shape types\n\t\t\t\tif (idx != -1) {\n\t\t\t\t\tthis.gamedata.frames[idx].type = \"digit\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// find all digit locations\n\t\t\tfor (var l = 0; l < this.gamedata.digits[d].locations.length; l++) {\n\t\t\t\tconst filename = this.gamedata.digits[d].locations[l];\n\t\t\t\tconst idx = this.shapeIndexByName(filename);\n\t\t\t\tthis.gamedata.digits[d].locids.push(idx);\n\t\t\t}\n\t\t\t// set max\n\t\t\tvar str = this.gamedata.digits[d].max || \"\";\n\t\t\tif (str == \"\") {\n\t\t\t\tfor (var c = 0; c < this.gamedata.digits[d].locids.length; c++) { str += \"8\";} // for example \"8888\"\n\t\t\t\tthis.gamedata.digits[d].max = str;\n\t\t\t}\n\t\t}\n\n\t\t// prepare buttons keycodes\n\t\tfor (var b=0; b < this.gamedata.buttons.length; b++) {\n\n\t\t\t// shape indexes\n\t\t\tthis.gamedata.buttons[b].ids = [];\n\n\t\t\t// button area\n\t\t\tvar xmin = 1e4;\n\t\t\tvar ymin = 1e4;\n\t\t\tvar xmax = 0;\n\t\t\tvar ymax = 0;\n\n\t\t\t// find all button frames indexes\n\t\t\tfor (let f = 0; f < this.gamedata.buttons[b].frames.length; f++) {\n\t\t\t\tconst filename = this.gamedata.buttons[b].frames[f];\n\t\t\t\tconst idx = this.shapeIndexByName(filename);\n\t\t\t\tthis.gamedata.buttons[b].ids.push(idx);\n\t\t\t\t// flag image frame as button\n\t\t\t\tthis.gamedata.frames[idx].type = \"button\";\n\t\t\t\t// keep track of position and width/height\n\t\t\t\tvar spr = this.gamedata.frames[idx].spriteSourceSize;\n\t\t\t\tif (spr.x < xmin)         xmin = spr.x;\n\t\t\t\tif (spr.y < ymin)         ymin = spr.y;\n\t\t\t\tif (spr.x + spr.w > xmax) xmax = spr.x + spr.w;\n\t\t\t\tif (spr.y + spr.h > ymax) ymax = spr.y + spr.h;\n\t\t\t}\n\n\t\t\t// typically buttons are small, so make size of touch area 3x as big\n\t\t\tvar wh = (xmax - xmin);\n\t\t\tvar hh = (ymax - ymin);\n\t\t\txmin = xmin - wh;\n\t\t\tymin = ymin - hh;\n\t\t\txmax = xmax + wh;\n\t\t\tymax = ymax + hh;\n\n\t\t\tvar xcenter = (xmin + xmax) / 2.0;\n\t\t\tvar ycenter = (ymin + ymax) / 2.0;\n\n\t\t\t// button touch area\n\t\t\tthis.gamedata.buttons[b].area = {\"x1\":xmin, \"y1\":ymin, \"x2\":xmax, \"y2\":ymax, \"xc\":xcenter, \"yc\":ycenter};\n\n\t\t\t// default keycodes\n\t\t\tvar defkey = this.gamedata.buttons[b].name;\n\t\t\tif (typeof this.gamedata.buttons[b].defaultkeys !== \"undefined\") {\n\t\t\t\tdefkey = this.gamedata.buttons[b].defaultkeys;\n\t\t\t}\n\t\t\tthis.gamedata.buttons[b].keycodes = this.determineKeyCodes(defkey);\n\t\t}\n\n\t\t// fix overlaps in button touch areas\n\t\tfor (var b1=0; b1 < this.gamedata.buttons.length-1; b1++) {\n\t\t\tfor (var b2=b1+1; b2 < this.gamedata.buttons.length; b2++) {\n\t\t\t\t// check if overlap\n\t\t\t\tif (\n\t\t\t\t\t(this.gamedata.buttons[b1].area.x1 < this.gamedata.buttons[b2].area.x2) // horizontal overlap\n\t\t\t\t\t&& (this.gamedata.buttons[b1].area.x2 > this.gamedata.buttons[b2].area.x1)\n\t\t\t\t\t&& (this.gamedata.buttons[b1].area.y1 < this.gamedata.buttons[b2].area.y2) // vertical overlap\n\t\t\t\t\t&& (this.gamedata.buttons[b1].area.y2 > this.gamedata.buttons[b2].area.y1)\n\t\t\t\t) {\n\t\t\t\t\t// get center points of each area\n\t\t\t\t\tvar xc1 = this.gamedata.buttons[b1].area.xc;\n\t\t\t\t\tvar yc1 = this.gamedata.buttons[b1].area.yc;\n\t\t\t\t\tvar xc2 = this.gamedata.buttons[b2].area.xc;\n\t\t\t\t\tvar yc2 = this.gamedata.buttons[b2].area.yc;\n\n\t\t\t\t\t// rectract to left, right, up, down\n\t\t\t\t\tif ( Math.abs(xc1 - xc2) > Math.abs(yc1 - yc2) ) {\n\t\t\t\t\t\tif (xc1 > xc2) { // b1 is to the right of b2\n\t\t\t\t\t\t\tconst dif = (this.gamedata.buttons[b1].area.x1 - this.gamedata.buttons[b2].area.x2) / 2;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b1].area.x1 -= dif;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b2].area.x2 += dif;\n\t\t\t\t\t\t} else { // b1 is to the left of b2\n\t\t\t\t\t\t\tconst dif = (this.gamedata.buttons[b1].area.x2 - this.gamedata.buttons[b2].area.x1) / 2;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b1].area.x2 -= dif;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b2].area.x1 += dif;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (yc1 > yc2) { // b1 is below b2\n\t\t\t\t\t\t\tconst dif = (this.gamedata.buttons[b1].area.y1 - this.gamedata.buttons[b2].area.y2) / 2;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b1].area.y1 -= dif;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b2].area.y2 += dif;\n\t\t\t\t\t\t} else { // b1 is above b2\n\t\t\t\t\t\t\tconst dif = (this.gamedata.buttons[b1].area.y2 - this.gamedata.buttons[b2].area.y1) / 2;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b1].area.y2 -= dif;\n\t\t\t\t\t\t\tthis.gamedata.buttons[b2].area.y1 += dif;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tonConfigError: function(xhr) {\n\t\tconsole.log(\"** ERROR ** lcdgame.js - onConfigError: error loading json file\");\n\t\tconsole.error(xhr);\n\t},\n\n\t// -------------------------------------\n\t// load a metadata file\n\t// -------------------------------------\n\tloadMetadata: function(path) {\n\t\tvar xhrCallback = function()\n\t\t{\n\t\t\tif (xhr.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tif ((xhr.status === 200) || (xhr.status === 0)) {\n\t\t\t\t\tthis.onMetadataLoad(JSON.parse(xhr.responseText));\n\t\t\t\t} else {\n\t\t\t\t\tthis.onMetadataError(xhr);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.onreadystatechange = xhrCallback.bind(this);\n\n\t\txhr.open(\"GET\", path, true);\n\t\txhr.send();\n\t},\n\n\ttinyMarkDown: function(str) {\n\t\t// \\n => <br/>\n\t\tstr = str.replace(/\\n/gi, \"<br/>\");\n\n\t\t// *bold* => <b>bold</b>\n\t\tstr = str.replace(/\\*.*?\\*/g, function(foo){\n\t\t\treturn \"<b>\"+foo.slice(1, -1)+\"</b>\";\n\t\t});\n\n\t\t// _italic_ => <i>italic</i>\n\t\tstr = str.replace(/_.*?_/g, function(foo){\n\t\t\treturn \"<i>\"+foo.slice(1, -1)+\"</i>\";\n\t\t});\n\n\t\t// [button] => <btn>button</btn>\n\t\tstr = str.replace(/\\[(?:(?!\\[).)*?\\](?!\\()/g, function(foo){\n\t\t\treturn \"<btn>\"+foo.slice(1, -1)+\"</btn>\";\n\t\t});\n\n\t\t// hyperlinks [url text](www.test.com) => <a href=\"http://www.test.com\">url text</a>\n\t\tstr = str.replace(/(\\[(?:(?!\\[).)*?\\])(\\((?:(?!\\().)*?\\))/g, function(all, fst, sec, pos){\n\t\t\tvar url = sec.slice(1, -1);\n\t\t\tif (url.indexOf(\"http\") != 0) url = \"http://\" + url;\n\t\t\tvar txt = fst.slice(1, -1);\n\t\t\treturn '<a href=\"' + url + '\">' + txt + '</a>';\n\t\t});\n\n\t\treturn str;\n\t},\n\n\t// -------------------------------------\n\t// metadata load JSON file\n\t// -------------------------------------\n\tonMetadataLoad: function(data) {\n\t\t// load all from JSON data\n\t\tthis.metadata = data;\n\n\t\t// infobox content\n\t\tvar instr = this.tinyMarkDown(data.gameinfo.instructions.en);\n\t\tthis.infocontent.innerHTML = \"<h1>How to play</h1><br/>\" + instr;\n\n\t\t// get info from metadata\n\t\tvar title = data.gameinfo.device.title;\n\t\tvar gametypes = data.gameinfo.gametypes;\n\t\tthis.gametype = (typeof gametypes === \"undefined\" ? 0 : 1);\n\n\t\t// highscores\n\t\tthis.highscores = new HighScores(this, title, gametypes);\n\t\tthis.highscores.init(this.gametype);\n\t},\n\n\tonMetadataError: function(xhr) {\n\t\tconsole.log(\"** ERROR ** lcdgame.js - onMetadataError: error loading json file\");\n\t\tconsole.error(xhr);\n\t},\n\n\tresizeCanvas: function() {\n\n\t\t// determine which is limiting factor for current window/frame size; width or height\n\t\tvar scrratio = window.innerWidth / window.innerHeight;\n\t\tvar imgratio = this.canvas.width / this.canvas.height;\n\n\t\t// determine screen/frame size\n\t\tvar w = this.canvas.width;\n\t\tvar h = this.canvas.height;\n\n\t\tif (imgratio > scrratio) {\n\t\t\t// width of image should take entire width of screen\n\t\t\tw = window.innerWidth;\n\t\t\tthis.scaleFactor = w / this.canvas.width;\n\t\t\th = this.canvas.height * this.scaleFactor;\n\n\t\t\t// set margins for full height\n\t\t\tvar ymargin = (window.innerHeight - h) / 2;\n\t\t\tthis.canvas.style[\"margin-top\"] = ymargin+\"px\";\n\t\t\tthis.canvas.style[\"margin-bottom\"] = -ymargin+\"px\";\n\t\t\tthis.canvas.style[\"margin-left\"] = \"0px\";\n\t\t} else {\n\t\t\t// height of image should take entire height of screen\n\t\t\th = window.innerHeight;\n\t\t\tthis.scaleFactor = h / this.canvas.height;\n\t\t\tw = this.canvas.width * this.scaleFactor;\n\n\t\t\t// set margins for full height\n\t\t\tvar xmargin = (window.innerWidth - w) / 2;\n\t\t\tthis.canvas.style[\"margin-left\"] = xmargin+\"px\";\n\t\t\tthis.canvas.style[\"margin-right\"] = -xmargin+\"px\";\n\t\t\tthis.canvas.style[\"margin-top\"] = \"0px\";\n\t\t}\n\n\t\t// set canvas size\n\t\tthis.canvas.style.width = w+\"px\";\n\t\tthis.canvas.style.height = h+\"px\";\n\n\t\t// set canvas properties\n\t\tthis.canvas.style.display = \"block\";\n\t\tthis.canvas.style[\"touch-action\"] = \"none\"; // no text select on touch\n\t\tthis.canvas.style[\"user-select\"] = \"none\"; // no text select on touch\n\t\tthis.canvas.style[\"-webkit-tap-highlight-color\"] = \"rgba(0, 0, 0, 0)\"; // not sure what this does\n\n\t\t// center infobox\n\t\tthis.resizeInfobox(this.infobox);\n\t\tthis.resizeInfobox(this.scorebox);\n\t},\n\n\tresizeInfobox: function(box) {\n\n\t\t// set visible, else width height doesn't work\n\t\tbox.style.display = \"inherit\";\n\n\t\t// determine screen/frame size\n\t\tvar w = box.offsetWidth;\n\t\tvar h = box.offsetHeight;\n\t\tvar rect = box.getBoundingClientRect();\n\t\tif (rect) {\n\t\t\tw = rect.width;\n\t\t\th = rect.height;\n\t\t}\n\n\t\tvar xmargin = (window.innerWidth - w) / 2;\n\t\tvar ymargin = (window.innerHeight - h) / 2;\n\n\t\t// set margins for full height\n\t\tbox.style[\"margin-left\"] = xmargin+\"px\";\n\t\tbox.style[\"margin-right\"] = -xmargin+\"px\";\n\t\tbox.style[\"margin-top\"] = ymargin+\"px\";\n\t\tbox.style[\"margin-bottom\"] = -ymargin+\"px\";\n\n\t\t// reset visibility\n\t\tbox.style.display = \"none\";\n\t},\n\n\t// -------------------------------------\n\t// start the specific game\n\t// -------------------------------------\n\tinitGame: function() {\n\t\t// no scrollbars\n\t\tdocument.body.scrollTop = 0;\n\t\tdocument.body.style.overflow = 'hidden';\n\n\t\t// initialise canvas\n\t\tthis.canvas.width = this.imageBackground.width;\n\t\tthis.canvas.height = this.imageBackground.height;\n\n\t\tthis.context2d.drawImage(this.imageBackground, 0, 0);\n\n\t\t// prepare sounds\n\t\tfor (var i=0; i < this.gamedata.sounds.length; i++) {\n\t\t\tvar strfile = this.gamedata.sounds[i].filename;\n\t\t\tthis.gamedata.sounds[i].audio = new Audio(strfile);\n\t\t\tthis.gamedata.sounds[i].audio.load();\n\t\t}\n\n\t\t// mouse or touch input\n\t\t//if (window.navigator.msPointerEnabled || window.navigator.pointerEnabled)\n\t\t//{\n\t\t//    this._mousedevice = true;\n\t\t//};\n\n\t\tif ('ontouchstart' in document.documentElement || (window.navigator.maxTouchPoints && window.navigator.maxTouchPoints >= 1))\n\t\t{\n\t\t\tthis._touchdevice = true;\n\t\t}\n\n\t\t// bind input\n\t\tif (document.addEventListener) { // chrome, firefox\n\t\t\t// mouse/touch\n\t\t\tthis.canvas.addEventListener(\"mousedown\", this.onmousedown.bind(this), false);\n\t\t\tthis.canvas.addEventListener(\"mouseup\",   this.onmouseup.bind(this), false);\n\t\t\t// keyboard\n\t\t\tdocument.addEventListener(\"keydown\", this.onkeydown.bind(this), false);\n\t\t\tdocument.addEventListener(\"keyup\",   this.onkeyup.bind(this), false);\n\n\t\t\tif (this._touchdevice) {\n\t\t\t\tthis.canvas.addEventListener(\"touchstart\", this.ontouchstart.bind(this), false);\n\t\t\t\tthis.canvas.addEventListener(\"touchend\",   this.ontouchend.bind(this), false);\n\t\t\t}\n\n\t\t} else { // IE8\n\t\t\t// mouse/touch\n\t\t\tthis.canvas.attachEvent(\"mousedown\", this.onmousedown.bind(this));\n\t\t\tthis.canvas.attachEvent(\"mouseup\",   this.onmouseup.bind(this));\n\t\t\t// keyboard\n\t\t\tdocument.attachEvent(\"keydown\", this.onkeydown.bind(this));\n\t\t\tdocument.attachEvent(\"keyup\",   this.onkeyup.bind(this));\n\t\t}\n\n\t\t// real time resize\n\t\twindow.addEventListener(\"resize\", this.resizeCanvas.bind(this), false);\n\n\t\t// center position\n\t\tthis.resizeCanvas();\n\n\t\tdisplayInfobox();\n\n\t\tthis.raf.start();\n\n\t\tconsole.log(\"lcdgame.js v\" +  LCDGAME_VERSION + \" :: start\");\n\t},\n\n\t// -------------------------------------\n\t// timers and game loop\n\t// -------------------------------------\n\taddtimer: function(context, callback, ms, waitfirst) {\n\n\t\t// after .start() do instantly start callbacks (true), or wait the first time (false), so:\n\t\t// true  => .start() [callback] ..wait ms.. [callback] ..wait ms.. etc.\n\t\t// false => .start() ..wait ms.. [callback] ..wait ms.. [callback] etc.\n\t\tif (typeof waitfirst === \"undefined\") waitfirst = true;\n\n\t\t// add new timer object\n\t\tvar tim = new Timer(context, callback, ms, waitfirst);\n\n\t\tthis.timers.push(tim);\n\n\t\treturn tim;\n\t},\n\n\tcleartimers: function() {\n\t\t// clear all timers\n\t\tfor (var t=0; t < this.timers.length; t++) {\n\t\t\tthis.timers[t].pause();\n\t\t\tthis.timers[t] = null;\n\t\t}\n\t\tthis.timers = [];\n\t},\n\n\tupdateloop: function(timestamp) {\n\n\t\t// check all timers\n\t\tfor (var t=0; t < this.timers.length; t++) {\n\t\t\tif (this.timers[t].enabled) {\n\t\t\t\tthis.timers[t].update(timestamp);\n\t\t\t}\n\t\t}\n\n\t\t// any shapes updates\n\t\tif (this._refresh) {\n\t\t\tthis.shapesRefresh();\n\t\t\tthis._refresh = false;\n\t\t}\n\t},\n\n\tgameReset: function(gametype) {\n\t\t// new game reset variables\n\t\tthis.score = 0;\n\t\tthis.level = 0;\n\t\tthis.gametype = gametype;\n\t\tthis.buttonpress = 0;\n\t\tthis.playtimestart = new Date();\n\t},\n\n\t// -------------------------------------\n\t// sound effects\n\t// -------------------------------------\n\tloadSoundEffects: function() {\n\t\t// handle error\n\t\tconsole.log(\"loadSoundEffects - TODO load sound effects\");\n\t},\n\n\tsetSoundMute: function (value) {\n\t\tthis.soundmute = value;\n\t},\n\n\tsoundIndexByName: function (name) {\n\t\tvar idx = 0;\n\t\tfor (var i = 0; i < this.gamedata.sounds.length; i++) {\n\t\t\tif (this.gamedata.sounds[i].name == name) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tplaySoundEffect: function (name) {\n\n\t\t// device sound is not muted\n\t\tif (!this.soundmute) {\n\t\t\t// get sound index from name\n\t\t\tvar idx = this.soundIndexByName(name);\n\n\t\t\t// if sound exists\n\t\t\tif (idx >= 0) {\n\t\t\t\t// if sound is playing then stop it now\n\t\t\t\tif (this.gamedata.sounds[idx].audio.paused == false) {\n\t\t\t\t\tthis.gamedata.sounds[idx].audio.pause();\n\t\t\t\t\t// fix for IE11\n\t\t\t\t\tif (!isNaN(this.gamedata.sounds[idx].audio.duration)) {\n\t\t\t\t\t\tthis.gamedata.sounds[idx].audio.currentTime = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// start playing sound\n\t\t\t\tthis.gamedata.sounds[idx].audio.play();\n\t\t\t}\n\t\t}\n\t},\n\n\t// -------------------------------------\n\t// random integer\n\t// -------------------------------------\n\trandomInteger: function(min, max) {\n\t\tmax = max - min + 1;\n\t\tvar r = Math.floor(Math.random() * max) + min;\n\t\treturn r;\n\t},\n\n\t// -------------------------------------\n\t// function for shapes and sequences\n\t// -------------------------------------\n\tshapeIndexByName: function(name) {\n\t\tfor (var i = 0; i < this.gamedata.frames.length; i++) {\n\t\t\tif (this.gamedata.frames[i].filename == name)\n\t\t\t\treturn i;\n\t\t}\n\t\tconsole.log(\"** ERROR ** shapeIndexByName('\"+name+\"') - filename not found.\");\n\t\t// if not found return -1\n\t\tthrow \"lcdgames.js - \"+arguments.callee.caller.toString()+\", no frame with filename '\" + name + \"'\";\n\t},\n\n\tsetShapeByName: function(filename, value) {\n\t\t// if called too soon\n\t\tif (this.gamedata.frames) {\n\t\t\t// find shape\n\t\t\tfor (var i = 0; i < this.gamedata.frames.length; i++) {\n\t\t\t\tif (this.gamedata.frames[i].filename == filename) {\n\t\t\t\t\tthis.gamedata.frames[i].value = value;\n\t\t\t\t\tthis._refresh = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow \"lcdgames.js - \"+arguments.callee.caller.toString()+\", no frame with filename '\" + filename + \"'\";\n\t\t}\n\t\treturn false;\n\t},\n\n\tsetShapeByIdx: function(idx, value) {\n\t\tthis.gamedata.frames[idx].value = value;\n\t\tthis._refresh = true;\n\t\treturn true;\n\t},\n\n\tsequenceIndexByName: function(name) {\n\t\tif (this.gamedata.sequences) {\n\t\t\tfor (var i = 0; i < this.gamedata.sequences.length; i++) {\n\t\t\t\tif (this.gamedata.sequences[i].name == name)\n\t\t\t\t\treturn i;\n\t\t\t}\n\t\t\tconsole.log(\"** ERROR ** sequenceIndexByName('\"+name+\"') - sequence name not found.\");\n\t\t\t// if not found return -1\n\t\t\tthrow \"lcdgames.js - \"+arguments.callee.caller.toString()+\", no sequence with name '\" + name + \"'\";\n\t\t}\n\t\treturn -1;\n\t},\n\n\tsequenceResetAll: function(name, value) {\n\t\t// value position is optional, default false\n\t\tif (typeof value === \"undefined\") value = false;\n\n\t\t// get sequence index of name\n\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t// shift shape values one place DOWN\n\t\tfor (var i = 0; i < this.gamedata.sequences[seqidx].ids.length; i++) {\n\t\t\t// get shape index in this sequence\n\t\t\tvar shape = this.gamedata.sequences[seqidx].ids[i];\n\t\t\t// clear all shapes in sequence\n\t\t\tthis.gamedata.frames[shape].value = value;\n\t\t}\n\t\t// refresh display\n\t\tthis._refresh = true;\n\t},\n\n\tsequenceClear: function(name) {\n\t\t// reset sequence to false\n\t\tthis.sequenceResetAll(name);\n\t},\n\n\tsequenceShift: function(name, max) {\n\t\t// example start [0] [1] [.] [3] [.] (.=off)\n\t\t//        result [.] [1] [2] [.] [4]\n\n\t\t// get sequence index of name\n\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t// max position is optional\n\t\tif (typeof max === \"undefined\") max = this.gamedata.sequences[seqidx].ids.length;\n\n\t\t// shift shape values one place DOWN\n\t\tvar i;\n\t\tvar ret = false;\n\t\tfor (i = max-1; i > 0; i--) {\n\t\t\t// get shape indexes of adjacent shapes in this sequence\n\t\t\tconst shape1 = this.gamedata.sequences[seqidx].ids[i-1];\n\t\t\tconst shape2 = this.gamedata.sequences[seqidx].ids[i];\n\n\t\t\t// return value\n\t\t\tif (i == (max-1)) ret = this.gamedata.frames[shape2].value;\n\n\t\t\t// shift shape values DOWN one place in sequence\n\t\t\tthis.gamedata.frames[shape2].value = this.gamedata.frames[shape1].value;\n\t\t}\n\t\t// set first value to blank; default value false\n\t\tvar shape1 = this.gamedata.sequences[seqidx].ids[0];\n\t\tthis.gamedata.frames[shape1].value = false;\n\n\t\t// refresh display\n\t\tthis._refresh = true;\n\n\t\t// return value, was the last value that was \"shifted-out\" true or false\n\t\treturn ret;\n\t},\n\n\tsequenceShiftReverse: function(name, min) {\n\t\t// example start [.] [1] [.] [3] [4] (.=off)\n\t\t//        result [0] [.] [2] [3] [.]\n\n\t\t// get sequence index of name\n\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t// min position is optional\n\t\tif (typeof min === \"undefined\") min = 0;\n\n\t\t// shift shape values one place UP\n\t\tvar i;\n\t\tfor (i = min; i < this.gamedata.sequences[seqidx].ids.length-1; i++) {\n\t\t\t// get shape indexes of adjacent shapes in this sequence\n\t\t\tconst shape1 = this.gamedata.sequences[seqidx].ids[i];\n\t\t\tconst shape2 = this.gamedata.sequences[seqidx].ids[i+1];\n\t\t\t// shift shape values UP one place in sequence\n\t\t\tthis.gamedata.frames[shape1].value = this.gamedata.frames[shape2].value;\n\t\t}\n\t\t// set last value to blank; default value false\n\t\tvar shape1 = this.gamedata.sequences[seqidx].ids[i];\n\t\tthis.gamedata.frames[shape1].value = false;\n\t\t// refresh display\n\t\tthis._refresh = true;\n\t},\n\n\tsequenceSetFirst: function(name, value) {\n\t\t// get sequence\n\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t// set value for first shape in sequence\n\t\tvar shape1 = this.gamedata.sequences[seqidx].ids[0];\n\t\tthis.gamedata.frames[shape1].value = value;\n\t\t// refresh display\n\t\tthis._refresh = true;\n\t},\n\n\tsequenceSetPos: function(name, pos, value) {\n\t\tif (this.gamedata.sequences) {\n\t\t\t// get sequence\n\t\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t\t// if pos is -1, then last last position\n\t\t\tif (pos == -1) {pos = this.gamedata.sequences[seqidx].ids.length-1;}\n\n\t\t\t// if pos out of bound of sequence array\n\t\t\tif (pos < this.gamedata.sequences[seqidx].ids.length) {\n\t\t\t\t// set value for position shape in sequence\n\t\t\t\tvar shape1 = this.gamedata.sequences[seqidx].ids[pos];\n\t\t\t\tthis.gamedata.frames[shape1].value = value;\n\n\t\t\t\t// refresh display\n\t\t\t\tthis._refresh = true;\n\t\t\t}\n\t\t}\n\t},\n\n\tshapeVisible: function(name) {\n\t\t// find shape\n\t\tfor (var i = 0; i < this.gamedata.frames.length; i++) {\n\t\t\tif (this.gamedata.frames[i].filename == name) {\n\t\t\t\tif (this.gamedata.frames[i].value == true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tsequenceShapeVisible: function(name, pos) {\n\t\t// get sequence\n\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t// single pos or any pos\n\t\tif (typeof pos === \"undefined\") {\n\t\t\t// no pos given, check if any shape visible\n\t\t\tfor (var i = 0; i < this.gamedata.sequences[seqidx].ids.length; i++) {\n\t\t\t\t// check if any shape is visible (value==true)\n\t\t\t\tconst shape1 = this.gamedata.sequences[seqidx].ids[i];\n\t\t\t\tif (this.gamedata.frames[shape1].value == true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// if pos is -1, then last last position\n\t\t\tif (pos == -1) {pos = this.gamedata.sequences[seqidx].ids.length-1;}\n\n\t\t\t// if pos out of bound of sequence array\n\t\t\tif (pos < this.gamedata.sequences[seqidx].ids.length) {\n\t\t\t\t// check if shape is visible (value==true)\n\t\t\t\tconst shape1 = this.gamedata.sequences[seqidx].ids[pos];\n\t\t\t\tif (this.gamedata.frames[shape1].value == true) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\tsequenceAllVisible: function(name, value) {\n\t\t// get sequence\n\t\tvar seqidx = this.sequenceIndexByName(name);\n\n\t\t// check if all visible same as value\n\t\tfor (var i = 0; i < this.gamedata.sequences[seqidx].ids.length; i++) {\n\t\t\t// check if all shapes same visible\n\t\t\tvar shape1 = this.gamedata.sequences[seqidx].ids[i];\n\t\t\tif (this.gamedata.frames[shape1].value != value) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\tshapesDisplayAll: function(value) {\n\n\t\tif (this.gamedata.frames) {\n\t\t\t// all shapes\n\t\t\tfor (let i = 0; i < this.gamedata.frames.length; i++) {\n\t\t\t\t// print out current values of sequence\n\t\t\t\tif ( (this.gamedata.frames[i].type == \"shape\") || (this.gamedata.frames[i].type == \"digitpos\") ) {\n\t\t\t\t\tthis.gamedata.frames[i].value = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// all digits\n\t\t\tif (value == true) {\n\t\t\t\tfor (let i = 0; i < this.gamedata.digits.length; i++) {\n\t\t\t\t\tthis.digitsDisplay(this.gamedata.digits[i].name, this.gamedata.digits[i].max);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// refresh display\n\t\t\tthis._refresh = true;\n\t\t}\n\t},\n\n\t// -------------------------------------\n\t// function for digits\n\t// -------------------------------------\n\tdigitsDisplay: function(name, str, rightalign) {\n\t\t// not loaded yet\n\t\tif (!this.gamedata.digits) return;\n\n\t\t// get sequence\n\t\tvar digidx = -1;\n\t\tfor (let i = 0; i < this.gamedata.digits.length; i++) {\n\t\t\tif (this.gamedata.digits[i].name == name) {\n\t\t\t\tdigidx = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (digidx == -1) {\n\t\t\tconsole.log(\"** ERROR ** digitsDisplay('\"+name+\"') - digits not found.\");\n\t\t\t// if not found return -1\n\t\t\tthrow \"lcdgames.js - digitsDisplay, no digits with name '\" + name + \"'\";\n\t\t} else {\n\n\t\t\t// align right parameter is optional, set default value\n\t\t\t//if (rightalign === \"undefined\") {rightalign = false};\n\n\t\t\t// set value for first shape in sequence\n\t\t\tvar chridx = 0; // index of character in str\n\t\t\tvar firstid = 0; // index of id in shape ids\n\n\t\t\t// exception for right-align\n\t\t\tif (rightalign == true) {\n\t\t\t\tfirstid = this.gamedata.digits[digidx].locids.length - str.length;\n\t\t\t\t// if too many digits\n\t\t\t\tif (firstid < 0) {\n\t\t\t\t\tchridx = Math.abs(firstid); // skip left-most digit(s) of str\n\t\t\t\t\tfirstid = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// example\n\t\t\t// placeholders [ ] [ ] [ ] [ ] [ ]\n\t\t\t// str \" 456\"   [ ] [4] [5] [6]\n\t\t\t// outcome should be\n\t\t\t// placeholders [.] [4] [5] [6] [.]  (.=empty/invisible)\n\t\t\t// firstid = index 1-^\n\n\t\t\t// adjust all shapes of digitplaceholders to display correct digits, and force them to refresh\n\t\t\tfor (let i=0; i < this.gamedata.digits[digidx].locids.length; i++) {\n\t\t\t\t// shape of digitplaceholder\n\t\t\t\tvar locidx = this.gamedata.digits[digidx].locids[i];\n\n\t\t\t\t// make non-used digit placeholders invisible\n\t\t\t\tif ( (i < firstid) || (chridx >= str.length) ) {\n\t\t\t\t\t// make non-used digit placeholders invisible\n\t\t\t\t\tthis.gamedata.frames[locidx].value = false;\n\t\t\t\t} else {\n\t\t\t\t\t// 48 = ascii code for \"0\"\n\t\t\t\t\tvar digit = str.charCodeAt(chridx) - 48;\n\n\t\t\t\t\t// check if valid digit\n\t\t\t\t\tif ( (digit >= 0) && (digit < this.gamedata.digits[digidx].ids.length) ) {\n\t\t\t\t\t\tvar digitshape = this.gamedata.digits[digidx].ids[digit]; // shape of digit\n\n\t\t\t\t\t\t// change the \"from\" part of the placeholder so it will draw the desired digit shape\n\t\t\t\t\t\tthis.gamedata.frames[locidx].frame.x = this.gamedata.frames[digitshape].frame.x;\n\t\t\t\t\t\tthis.gamedata.frames[locidx].frame.y = this.gamedata.frames[digitshape].frame.y;\n\n\t\t\t\t\t\t// make sure the placeholder (with new digit) gets re-drawn\n\t\t\t\t\t\tthis.gamedata.frames[locidx].value = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// non-digit, example space (' ')\n\t\t\t\t\t\tthis.gamedata.frames[locidx].value = false;\n\t\t\t\t\t}\n\t\t\t\t\t// next character in str\n\t\t\t\t\tchridx = chridx + 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// refresh display\n\t\t\tthis._refresh = true;\n\t\t}\n\t},\n\n\t// -------------------------------------\n\t// function for drawing and redrawing shapes\n\t// -------------------------------------\n\tshapesRefresh: function() {\n\n\t\t// TODO: implement dirty rectangles?\n\t\t// FOR NOW: simply redraw everything\n\n\t\tif (this.gamedata.frames) {\n\t\t\t// redraw entire background (=inefficient)\n\t\t\tthis.context2d.drawImage(this.imageBackground, 0, 0);\n\n\t\t\t// add current/previous values to all shape objects\n\t\t\tfor (var i = 0; i < this.gamedata.frames.length; i++) {\n\t\t\t\tif (this.gamedata.frames[i].value == true) {\n\t\t\t\t\tthis.shapeDraw(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.drawDebugText();\n\n\t\t\t// debugging show button areas\n\t\t\t//for (var i=0; i < this.gamedata.buttons.length; i++) {\n\t\t\t//\tvar x1 = this.gamedata.buttons[i].area.x1;\n\t\t\t//\tvar y1 = this.gamedata.buttons[i].area.y1;\n\t\t\t//\tvar x2 = this.gamedata.buttons[i].area.x2;\n\t\t\t//\tvar y2 = this.gamedata.buttons[i].area.y2;\n\t\t\t//\tthis.debugRectangle(x1, y1, (x2-x1), (y2-y1));\n\t\t\t//};\n\t\t}\n\t\t// display was refreshed\n\t\tthis._refresh = false;\n\n\t},\n\n\tshapeDraw: function(index) {\n\t\t// draw shape\n\t\tthis.context2d.drawImage(\n\t\t\tthis.imageShapes,\n\t\t\tthis.gamedata.frames[index].frame.x, // from\n\t\t\tthis.gamedata.frames[index].frame.y,\n\t\t\tthis.gamedata.frames[index].frame.w,\n\t\t\tthis.gamedata.frames[index].frame.h,\n\t\t\tthis.gamedata.frames[index].spriteSourceSize.x, // to\n\t\t\tthis.gamedata.frames[index].spriteSourceSize.y,\n\t\t\tthis.gamedata.frames[index].spriteSourceSize.w,\n\t\t\tthis.gamedata.frames[index].spriteSourceSize.h\n\t\t);\n\n\t\t// show shape index\n\t\t//this.context2d.font = \"bold 16px sans-serif\";\n\t\t//this.context2d.fillStyle = \"#fff\";\n\t\t//this.context2d.fillText(index, this.gamedata.frames[index].xpos, this.gamedata.frames[index].ypos);\n\t},\n\n\tdebugText: function(str) {\n\t\t// set text\n\t\tthis.debugtxt = str;\n\t},\n\n\tdrawDebugText: function() {\n\t\tif (this.debugtxt) {\n\t\t\t// set font and position\n\t\t\tthis.context2d.font = \"bold 24px sans-serif\";\n\t\t\tvar x = 50;\n\t\t\tvar y = 50;\n\n\t\t\tvar lineheight = 15;\n\t\t\tvar lines = this.debugtxt.split('\\n');\n\n\t\t\tfor (var i = 0; i<lines.length; i++) {\n\t\t\t\t// shadow text\n\t\t\t\tthis.context2d.fillStyle = \"#000\";\n\t\t\t\tthis.context2d.fillText(lines[i], x+2, y+2);\n\t\t\t\t// white text\n\t\t\t\tthis.context2d.fillStyle = \"#fff\";\n\t\t\t\tthis.context2d.fillText(lines[i], x, y);\n\t\t\t\ty = y + lineheight;\n\t\t\t}\n\t\t}\n\t},\n\n\t// -------------------------------------\n\t// buttons input through keyboard\n\t// -------------------------------------\n\tbuttonAdd: function(name, framenames, defaultkeys) {\n\t\t// if no buttons yet\n\t\tif (typeof this.buttons === 'undefined') {\n\t\t\tthis.buttons = [];\n\t\t}\n\t\tvar maxidx = this.gamedata.buttons.length;\n\n\t\t// add button keycodes\n\t\tthis.gamedata.buttons[maxidx] = {};\n\n\t\t// set values for button\n\t\tthis.gamedata.buttons[maxidx].name = name;\n\t\tthis.gamedata.buttons[maxidx].frames = framenames;\n\t\tthis.gamedata.buttons[maxidx].defaultkeys = defaultkeys;\n\n\t\tthis.gamedata.buttons[maxidx].keycodes = this.determineKeyCodes(defaultkeys);\n\t},\n\n\tdetermineKeyCodes: function(keyname) {\n\t\t// variables\n\t\tvar result = [];\n\n\t\t// possibly more than 1 keyvariables\n\t\tfor (var i = 0; i < keyname.length; i++) {\n\t\t\tvar c = 0;\n\t\t\tvar k = keyname[i];\n\n\t\t\t// key code\n\t\t\tk = k.toUpperCase();\n\n\t\t\tif (k.indexOf(\"PGUP\") > -1) {\n\t\t\t\tc = 33;\n\t\t\t} else if (k.indexOf(\"PGDN\") > -1) {\n\t\t\t\tc = 34;\n\t\t\t} else if (k.indexOf(\"END\") > -1) {\n\t\t\t\tc = 35;\n\t\t\t} else if (k.indexOf(\"HOME\") > -1) {\n\t\t\t\tc = 36;\n\t\t\t} else if (k.indexOf(\"UP\") > -1) {\n\t\t\t\tc = 38;\n\t\t\t} else if (k.indexOf(\"DOWN\") > -1) {\n\t\t\t\tc = 40;\n\t\t\t} else if (k.indexOf(\"LEFT\") > -1) {\n\t\t\t\tc = 37;\n\t\t\t} else if (k.indexOf(\"RIGHT\") > -1) {\n\t\t\t\tc = 39;\n\t\t\t} else {\n\t\t\t\tc = k.charCodeAt(0);\n\t\t\t}\n\n\t\t\t// add\n\t\t\tresult.push(c);\n\t\t}\n\n\t\t// return array of keycode(s)\n\t\treturn result;\n\t},\n\n\tontouchstart: function(evt) {\n\n\t\tevt.preventDefault();\n\n\t\t//  evt.changedTouches is changed touches in this event, not all touches at this moment\n\t\tfor (var i = 0; i < event.changedTouches.length; i++)\n\t\t{\n\t\t\tthis.onmousedown(event.changedTouches[i]);\n\t\t}\n\t},\n\n\tontouchend: function(evt) {\n\t\tevt.preventDefault();\n\n\t\t//  evt.changedTouches is changed touches in this event, not all touches at this moment\n\t\tfor (var i = 0; i < evt.changedTouches.length; i++)\n\t\t{\n\t\t\tthis.onmouseup(evt.changedTouches[i]);\n\t\t}\n\t},\n\n\tonmousedown: function(evt) {\n\n\t\tvar x = (evt.offsetX || evt.clientX - evt.target.offsetLeft);\n\t\tvar y = (evt.offsetY || evt.clientY - evt.target.offsetTop);\n\n\t\t//var x = evt.layerX;\n\t\t//var y = evt.layerY;\n\t\tx = x / this.scaleFactor;\n\t\ty = y / this.scaleFactor;\n\n\t\t// check if pressed in defined buttons\n\t\tfor (var i=0; i < this.gamedata.buttons.length; i++) {\n\t\t\t// inside button touch area\n\t\t\tif (   (x > this.gamedata.buttons[i].area.x1)\n\t\t\t\t&& (x < this.gamedata.buttons[i].area.x2)\n\t\t\t\t&& (y > this.gamedata.buttons[i].area.y1)\n\t\t\t\t&& (y < this.gamedata.buttons[i].area.y2)\n\t\t\t) {\n\t\t\t\tvar btnidx = 0;\n\t\t\t\tlet xhalf;\n\t\t\t\tlet yhalf;\n\t\t\t\t// which type of device button\n\t\t\t\tswitch(this.gamedata.buttons[i].type) {\n\t\t\t\t\tcase \"updown\":\n\t\t\t\t\t// two direction button up/down\n\t\t\t\t\t\tyhalf = ((this.gamedata.buttons[i].area.y2 - this.gamedata.buttons[i].area.y1) / 2);\n\t\t\t\t\t\t// up or down\n\t\t\t\t\t\tbtnidx = (y < this.gamedata.buttons[i].area.y1 + yhalf ? 0 : 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"leftright\":\n\t\t\t\t\t// two direction button left/right\n\t\t\t\t\t\txhalf = ((this.gamedata.buttons[i].area.x2 - this.gamedata.buttons[i].area.x1) / 2);\n\t\t\t\t\t\t// left or right\n\t\t\t\t\t\tbtnidx = (x < this.gamedata.buttons[i].area.x1 + xhalf ? 0 : 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dpad\":\n\t\t\t\t\t// four direction button up/down/left/right\n\t\t\t\t\t\txhalf = ((this.gamedata.buttons[i].area.x2 - this.gamedata.buttons[i].area.x1) / 2);\n\t\t\t\t\t\tyhalf = ((this.gamedata.buttons[i].area.y2 - this.gamedata.buttons[i].area.y1) / 2);\n\t\t\t\t\t\t// distance to center\n\t\t\t\t\t\tvar xdist = x - this.gamedata.buttons[i].area.x1 - xhalf;\n\t\t\t\t\t\tvar ydist = y - this.gamedata.buttons[i].area.y1 - yhalf;\n\t\t\t\t\t\tif (Math.abs(xdist) < Math.abs(ydist)) {\n\t\t\t\t\t\t// up or down\n\t\t\t\t\t\t\tbtnidx = (ydist < 0 ? 0 : 1); // 0=up, 1=down\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t// left or right\n\t\t\t\t\t\t\tbtnidx = (xdist < 0 ? 2 : 3); // 2=left, 3=right\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t//default: // case \"button\":\n\t\t\t\t\t//\t// simple button\n\t\t\t\t\t//\tbtnidx = 0;\n\t\t\t\t\t//\tbreak;\n\t\t\t\t}\n\t\t\t\t// button press down\n\t\t\t\tthis.onButtonDown(i, btnidx);\n\t\t\t}\n\t\t}\n\t},\n\n\tonmouseup: function(evt) {\n\n\t\tvar x = (evt.offsetX || evt.clientX - evt.target.offsetLeft);\n\t\tvar y = (evt.offsetY || evt.clientY - evt.target.offsetTop);\n\n\t\t//var x = evt.layerX;\n\t\t//var y = evt.layerY;\n\t\tx = x / this.scaleFactor;\n\t\ty = y / this.scaleFactor;\n\n\t\t// check if pressed in defined buttons\n\t\tfor (var i=0; i < this.gamedata.buttons.length; i++) {\n\t\t\t// inside button touch area\n\t\t\tif (   (x > this.gamedata.buttons[i].area.x1)\n\t\t\t\t&& (x < this.gamedata.buttons[i].area.x2)\n\t\t\t\t&& (y > this.gamedata.buttons[i].area.y1)\n\t\t\t\t&& (y < this.gamedata.buttons[i].area.y2)\n\t\t\t) {\n\t\t\t\tvar btnidx = 0;\n\t\t\t\tlet half;\n\t\t\t\t// which type of device button\n\t\t\t\tswitch(this.gamedata.buttons[i].type) {\n\t\t\t\t\tcase \"updown\":\n\t\t\t\t\t// two direction button up/down\n\t\t\t\t\t\thalf = ((this.gamedata.buttons[i].area.y2 - this.gamedata.buttons[i].area.y1) / 2);\n\t\t\t\t\t\t// up or down\n\t\t\t\t\t\tbtnidx = (y < this.gamedata.buttons[i].area.y1 + half ? 0 : 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"leftright\":\n\t\t\t\t\t// two direction button left/right\n\t\t\t\t\t\thalf = ((this.gamedata.buttons[i].area.x2 - this.gamedata.buttons[i].area.x1) / 2);\n\t\t\t\t\t\t// left or right\n\t\t\t\t\t\tbtnidx = (x < this.gamedata.buttons[i].area.x1 + half ? 0 : 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dpad\":\n\t\t\t\t\t// four direction button up/down/left/right\n\t\t\t\t\t\tvar xhalf = ((this.gamedata.buttons[i].area.x2 - this.gamedata.buttons[i].area.x1) / 2);\n\t\t\t\t\t\tvar yhalf = ((this.gamedata.buttons[i].area.y2 - this.gamedata.buttons[i].area.y1) / 2);\n\t\t\t\t\t\t// distance to center\n\t\t\t\t\t\tvar xdist = x - this.gamedata.buttons[i].area.x1 - xhalf;\n\t\t\t\t\t\tvar ydist = y - this.gamedata.buttons[i].area.y1 - yhalf;\n\t\t\t\t\t\tif (Math.abs(xdist) < Math.abs(ydist)) {\n\t\t\t\t\t\t// up or down\n\t\t\t\t\t\t\tbtnidx = (ydist < 0 ? 0 : 1); // 0=up, 1=down\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t// left or right\n\t\t\t\t\t\t\tbtnidx = (xdist < 0 ? 2 : 3); // 2=left, 3=right\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t//default: // case \"button\":\n\t\t\t\t\t//\t// simple button\n\t\t\t\t\t//\tbtnidx = 0;\n\t\t\t\t\t//\tbreak;\n\t\t\t\t}\n\t\t\t\t// button release\n\t\t\t\tthis.onButtonUp(i, btnidx);\n\t\t\t}\n\t\t}\n\t},\n\n\tonkeydown: function(e) {\n\t\t// get keycode\n\t\tvar keyCode = e.keyCode;\n\n\t\t// check if keycode in defined buttons\n\t\tfor (var i=0; i < this.gamedata.buttons.length; i++) {\n\t\t\tfor (var j=0; j < this.gamedata.buttons[i].keycodes.length; j++) {\n\t\t\t\tif (this.gamedata.buttons[i].keycodes[j] == keyCode) {\n\t\t\t\t\tthis.onButtonDown(i, j);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tonkeyup: function(e) {\n\t\t// get keycode\n\t\tvar keyCode = e.keyCode;\n\n\t\t// check if keycode in defined buttons\n\t\tfor (var i=0; i < this.gamedata.buttons.length; i++) {\n\t\t\tfor (var j=0; j < this.gamedata.buttons[i].keycodes.length; j++) {\n\t\t\t\tif (this.gamedata.buttons[i].keycodes[j] == keyCode) {\n\t\t\t\t\tthis.onButtonUp(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tonButtonDown: function(btnidx, diridx) {\n\t\t// pass input to game\n\t\tvar name = this.gamedata.buttons[btnidx].name;\n\n\t\t// alternative buttons, i.e. if more keyboard buttons then buttons frames\n\t\t// for example if 2 button frames (left/right) and 4 keyboard buttons (left, right, A, D) then A=same as LEFT and D=same as RIGHT\n\t\tif (diridx >= this.gamedata.buttons[btnidx].ids.length) {\n\t\t\tdiridx = (diridx % this.gamedata.buttons[btnidx].ids.length);\n\t\t}\n\n\t\t// handle button press\n\t\tthis.state.currentState().press(name, diridx);\n\n\t\t// keep track of button presses\n\t\tthis.buttonpress++;\n\n\t\t// show button down on screen\n\t\tvar idx = this.gamedata.buttons[btnidx].ids[diridx];\n\t\tthis.setShapeByIdx(idx, true);\n\t},\n\n\tonButtonUp: function(btnidx, diridx) {\n\t\t// TODO: visually update frame so key is in neutral position\n\t\tfor (var s=0; s < this.gamedata.buttons[btnidx].ids.length; s++) {\n\t\t\tvar idx = this.gamedata.buttons[btnidx].ids[s];\n\t\t\tthis.setShapeByIdx(idx, false);\n\t\t}\n\n\t\t// pass input to game\n\t\tconst currentState = this.state.currentState();\n\t\tif (currentState?.release) {\n\t\t\tvar name = this.gamedata.buttons[btnidx].name;\n\t\t\tcurrentState.release(name, diridx);\n\t\t}\n\t},\n\n\tdebugRectangle: function(xpos, ypos, w, h) {\n\t\tvar color = \"#f0f\";\n\t\t// highlight a shape\n\t\tthis.context2d.beginPath();\n\t\tthis.context2d.lineWidth = \"1\";\n\t\tthis.context2d.strokeStyle = color;\n\t\tthis.context2d.fillStyle = color;\n\t\tthis.context2d.rect(xpos, ypos, w, h);\n\t\tthis.context2d.stroke();\n\t},\n\n\t// -------------------------------------\n\t// check if touch device\n\t// -------------------------------------\n\tis_touch_device: function() {\n\t\tvar el = document.createElement(\"div\");\n\t\tel.setAttribute(\"lcdgame.js - ongesturestart\", \"return;\");\n\t\tif(typeof el.ongesturestart === \"function\"){\n\t\t\treturn true;\n\t\t}else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nexport default Game;\n", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\nimport { displayScorebox, hideScorebox } from './Highscores';\nimport { displayInfobox, hideInfobox } from './Menu';\nimport Game from './Game';\n\nexport const LCDGAME_VERSION = \"0.3.4\";\n\n/**\n * @namespace LCDGame\n */\nconst LCDGame = window.LCDGame || {\n\tloadsounds: null,\n\tcountimages: 0,\n\t// scale factor\n\tscaleFactor: 1.0,\n\t/**\n\t* Keep score on global variable for highscore\n\t*\n\t* @property {score} integer - The game current score\n\t* @default\n\t*/\n\tscore: 0,\n\t/**\n\t* Which game type or difficulty, for high score purposes to be added later.\n\t* Has to implemented as seen fit for each individual game.\n\t* For the game Mariobros it can be 1='Game A', 2='Game B'\n\t* For the game Searanger it can be 1='Pro 1', 2='Pro 2'. etc.\n\t*\n\t* @property {gametype} integer - The game type or difficulty setting of the game\n\t* @default\n\t*/\n\tgametype: 0,\n\t/**\n\t* Which current 'level' in the game, for high score purposes to be added later.\n\t* Has to implemented as seen fit for each individual game.\n\t* For the game Highway it can be the amount of GAS bonus games played.\n\t* For the game Mariobros it can be how many trucks completed. etc.\n\t*\n\t* @property {level} integer - The current level in game\n\t* @default\n\t*/\n\tlevel: 0,\n\t/**\n\t* Total number of button presses for highscore heuristics\n\t*/\n\tbuttonpress: 0,\n\t/**\n\t* Start time of a gameplay session for highscore heuristics\n\t*/\n\tplaytimestart: null,\n\t// events\n\tonImageLoaded: null,\n\tonImageError: null,\n\tcanvas: null,\n\tcontext2d: null,\n\tdebugtxt: null,\n\n\t// Methods\n\tdisplayScorebox,\n\thideScorebox,\n\tdisplayInfobox,\n\thideInfobox,\n\n\t// Classes\n\tGame\n};\n\nexport default LCDGame;\n\n", "// LCD game JavaScript library\n// Bas de Reuver (c)2018\n\nimport System from './System';\n\nwindow.LCDGame = System;"],
  "mappings": "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",
  "names": []
}
